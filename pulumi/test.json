{
    "version": 3,
    "deployment": {
        "manifest": {
            "time": "2021-12-21T12:31:08.214342-05:00",
            "magic": "6739fd76fcf0291581ebe11353bf6765332f9edae1c50255315c1d97aaf24cc1",
            "version": "v3.20.0"
        },
        "secrets_providers": {
            "type": "service",
            "state": {
                "url": "https://api.pulumi.com",
                "owner": "joshkodroff",
                "project": "github-issue-automation",
                "stack": "dev"
            }
        },
        "resources": [
            {
                "urn": "urn:pulumi:dev::github-issue-automation::pulumi:pulumi:Stack::github-issue-automation-dev",
                "custom": false,
                "type": "pulumi:pulumi:Stack"
            },
            {
                "urn": "urn:pulumi:dev::github-issue-automation::pulumi:providers:aws::default",
                "custom": true,
                "id": "7d34f1bb-0dfb-47ee-b044-65ed1c667cf2",
                "type": "pulumi:providers:aws",
                "inputs": {
                    "defaultTags": "{\"tags\":{\"owner\":\"platform-integrations\",\"repo\":\"pulumi/github-issue-automation\"}}",
                    "version": "4.31.0"
                },
                "outputs": {
                    "defaultTags": "{\"tags\":{\"owner\":\"platform-integrations\",\"repo\":\"pulumi/github-issue-automation\"}}",
                    "version": "4.31.0"
                }
            },
            {
                "urn": "urn:pulumi:dev::github-issue-automation::aws:iam/role:Role::release-handler-role",
                "custom": true,
                "id": "NewReleaseHandlerExecutionRole",
                "type": "aws:iam/role:Role",
                "inputs": {
                    "__defaults": [
                        "forceDetachPolicies",
                        "maxSessionDuration",
                        "path"
                    ],
                    "assumeRolePolicy": "{\n\t\t\t\t\"Version\": \"2012-10-17\",\n\t\t\t\t\"Statement\": [{\n\t\t\t\t\t\"Sid\": \"\",\n\t\t\t\t\t\"Effect\": \"Allow\",\n\t\t\t\t\t\"Principal\": {\n\t\t\t\t\t\t\"Service\": \"lambda.amazonaws.com\"\n\t\t\t\t\t},\n\t\t\t\t\t\"Action\": \"sts:AssumeRole\"\n\t\t\t\t}]\n\t\t\t}",
                    "forceDetachPolicies": false,
                    "maxSessionDuration": 3600,
                    "name": "NewReleaseHandlerExecutionRole",
                    "path": "/"
                },
                "outputs": {
                    "arn": "arn:aws:iam::146095493949:role/NewReleaseHandlerExecutionRole",
                    "assumeRolePolicy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
                    "createDate": "2021-12-09T21:37:44Z",
                    "description": "",
                    "forceDetachPolicies": false,
                    "id": "NewReleaseHandlerExecutionRole",
                    "inlinePolicies": [
                        {
                            "name": "",
                            "policy": ""
                        }
                    ],
                    "managedPolicyArns": [
                        "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                    ],
                    "maxSessionDuration": 3600,
                    "name": "NewReleaseHandlerExecutionRole",
                    "namePrefix": "",
                    "path": "/",
                    "tags": {},
                    "tagsAll": {
                        "owner": "platform-integrations",
                        "repo": "pulumi/github-issue-automation"
                    },
                    "uniqueId": "AROASEA7YKM67HEOHTEJJ"
                },
                "parent": "urn:pulumi:dev::github-issue-automation::pulumi:pulumi:Stack::github-issue-automation-dev",
                "provider": "urn:pulumi:dev::github-issue-automation::pulumi:providers:aws::default::7d34f1bb-0dfb-47ee-b044-65ed1c667cf2",
                "propertyDependencies": {
                    "assumeRolePolicy": [],
                    "name": []
                }
            },
            {
                "urn": "urn:pulumi:dev::github-issue-automation::aws:secretsmanager/secret:Secret::release-handler-github-token-secret",
                "custom": true,
                "id": "arn:aws:secretsmanager:us-west-2:146095493949:secret:/new-release-handler/github-token-aj0Hne",
                "type": "aws:secretsmanager/secret:Secret",
                "inputs": {
                    "__defaults": [
                        "forceOverwriteReplicaSecret",
                        "recoveryWindowInDays"
                    ],
                    "description": "GitHub token that allows the creation of issues in all repos in the Pulumi org.",
                    "forceOverwriteReplicaSecret": false,
                    "name": "/new-release-handler/github-token",
                    "recoveryWindowInDays": 30
                },
                "outputs": {
                    "arn": "arn:aws:secretsmanager:us-west-2:146095493949:secret:/new-release-handler/github-token-aj0Hne",
                    "description": "GitHub token that allows the creation of issues in all repos in the Pulumi org.",
                    "forceOverwriteReplicaSecret": false,
                    "id": "arn:aws:secretsmanager:us-west-2:146095493949:secret:/new-release-handler/github-token-aj0Hne",
                    "kmsKeyId": "",
                    "name": "/new-release-handler/github-token",
                    "recoveryWindowInDays": 30,
                    "replicas": [],
                    "rotationEnabled": false,
                    "rotationLambdaArn": "",
                    "rotationRules": null,
                    "tags": {},
                    "tagsAll": {
                        "owner": "platform-integrations",
                        "repo": "pulumi/github-issue-automation"
                    }
                },
                "parent": "urn:pulumi:dev::github-issue-automation::pulumi:pulumi:Stack::github-issue-automation-dev",
                "provider": "urn:pulumi:dev::github-issue-automation::pulumi:providers:aws::default::7d34f1bb-0dfb-47ee-b044-65ed1c667cf2",
                "propertyDependencies": {
                    "description": [],
                    "name": []
                },
                "additionalSecretOutputs": [
                    "Value"
                ]
            },
            {
                "urn": "urn:pulumi:dev::github-issue-automation::aws:iam/user:User::zapier-user",
                "custom": true,
                "id": "zapier",
                "type": "aws:iam/user:User",
                "inputs": {
                    "__defaults": [
                        "forceDestroy",
                        "path"
                    ],
                    "forceDestroy": false,
                    "name": "zapier",
                    "path": "/"
                },
                "outputs": {
                    "arn": "arn:aws:iam::146095493949:user/zapier",
                    "forceDestroy": false,
                    "id": "zapier",
                    "name": "zapier",
                    "path": "/",
                    "tags": {},
                    "tagsAll": {
                        "owner": "platform-integrations",
                        "repo": "pulumi/github-issue-automation"
                    },
                    "uniqueId": "AIDASEA7YKM64F7RC7SIS"
                },
                "parent": "urn:pulumi:dev::github-issue-automation::pulumi:pulumi:Stack::github-issue-automation-dev",
                "provider": "urn:pulumi:dev::github-issue-automation::pulumi:providers:aws::default::7d34f1bb-0dfb-47ee-b044-65ed1c667cf2",
                "propertyDependencies": {
                    "name": []
                }
            },
            {
                "urn": "urn:pulumi:dev::github-issue-automation::aws:iam/rolePolicyAttachment:RolePolicyAttachment::release-handler-role-attachment",
                "custom": true,
                "id": "NewReleaseHandlerExecutionRole-20211209213745071700000001",
                "type": "aws:iam/rolePolicyAttachment:RolePolicyAttachment",
                "inputs": {
                    "__defaults": [],
                    "policyArn": "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
                    "role": "NewReleaseHandlerExecutionRole"
                },
                "outputs": {
                    "id": "NewReleaseHandlerExecutionRole-20211209213745071700000001",
                    "policyArn": "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
                    "role": "NewReleaseHandlerExecutionRole"
                },
                "parent": "urn:pulumi:dev::github-issue-automation::pulumi:pulumi:Stack::github-issue-automation-dev",
                "dependencies": [
                    "urn:pulumi:dev::github-issue-automation::aws:iam/role:Role::release-handler-role"
                ],
                "provider": "urn:pulumi:dev::github-issue-automation::pulumi:providers:aws::default::7d34f1bb-0dfb-47ee-b044-65ed1c667cf2",
                "propertyDependencies": {
                    "role": [
                        "urn:pulumi:dev::github-issue-automation::aws:iam/role:Role::release-handler-role"
                    ]
                }
            },
            {
                "urn": "urn:pulumi:dev::github-issue-automation::aws:secretsmanager/secretVersion:SecretVersion::release-handler-github-token-version",
                "custom": true,
                "id": "arn:aws:secretsmanager:us-west-2:146095493949:secret:/new-release-handler/github-token-aj0Hne|6C973B4F-D8C8-4532-B276-6FAA14A37DF4",
                "type": "aws:secretsmanager/secretVersion:SecretVersion",
                "inputs": {
                    "__defaults": [],
                    "secretId": "arn:aws:secretsmanager:us-west-2:146095493949:secret:/new-release-handler/github-token-aj0Hne",
                    "secretString": "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"
                },
                "outputs": {
                    "arn": "arn:aws:secretsmanager:us-west-2:146095493949:secret:/new-release-handler/github-token-aj0Hne",
                    "id": "arn:aws:secretsmanager:us-west-2:146095493949:secret:/new-release-handler/github-token-aj0Hne|6C973B4F-D8C8-4532-B276-6FAA14A37DF4",
                    "secretBinary": {
                        "4dabf18193072939515e22adb298388d": "1b47061264138c4ac30d75fd1eb44270",
                        "ciphertext": "AAABADVHC9VzkBa9thnT0MMbIGakAXoaEx8wCeQuTNHmqg=="
                    },
                    "secretId": "arn:aws:secretsmanager:us-west-2:146095493949:secret:/new-release-handler/github-token-aj0Hne",
                    "secretString": {
                        "4dabf18193072939515e22adb298388d": "1b47061264138c4ac30d75fd1eb44270",
                        "ciphertext": "AAABAOLVVG4oq4A1pjwp/XHTyORfqxI0ACGSbixCD3O3ZnxrCtEKLdxXTNRnCuPZqbtfMA9tZWvlNtmXFNOGcJIgcIJKsVgMYEc="
                    },
                    "versionId": "6C973B4F-D8C8-4532-B276-6FAA14A37DF4",
                    "versionStages": [
                        "AWSCURRENT"
                    ]
                },
                "parent": "urn:pulumi:dev::github-issue-automation::pulumi:pulumi:Stack::github-issue-automation-dev",
                "dependencies": [
                    "urn:pulumi:dev::github-issue-automation::aws:secretsmanager/secret:Secret::release-handler-github-token-secret"
                ],
                "provider": "urn:pulumi:dev::github-issue-automation::pulumi:providers:aws::default::7d34f1bb-0dfb-47ee-b044-65ed1c667cf2",
                "propertyDependencies": {
                    "secretId": [
                        "urn:pulumi:dev::github-issue-automation::aws:secretsmanager/secret:Secret::release-handler-github-token-secret"
                    ]
                }
            },
            {
                "urn": "urn:pulumi:dev::github-issue-automation::aws:iam/policy:Policy::new-release-handler-read-secrets",
                "custom": true,
                "id": "arn:aws:iam::146095493949:policy/new-release-handler-read-secrets-c451ab3",
                "type": "aws:iam/policy:Policy",
                "inputs": {
                    "__defaults": [
                        "name",
                        "path"
                    ],
                    "description": "Allows the new-release-handler Lambda to access its secrets.",
                    "name": "new-release-handler-read-secrets-c451ab3",
                    "path": "/",
                    "policy": "{\"Statement\":[{\"Action\":[\"secretsmanager:GetResourcePolicy\",\"secretsmanager:GetSecretValue\",\"secretsmanager:DescribeSecret\",\"secretsmanager:ListSecretVersionIds\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:secretsmanager:us-west-2:146095493949:secret:/new-release-handler/github-token-aj0Hne\"]},{\"Action\":\"secretsmanager:ListSecrets\",\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}"
                },
                "outputs": {
                    "arn": "arn:aws:iam::146095493949:policy/new-release-handler-read-secrets-c451ab3",
                    "description": "Allows the new-release-handler Lambda to access its secrets.",
                    "id": "arn:aws:iam::146095493949:policy/new-release-handler-read-secrets-c451ab3",
                    "name": "new-release-handler-read-secrets-c451ab3",
                    "path": "/",
                    "policy": "{\"Statement\":[{\"Action\":[\"secretsmanager:GetResourcePolicy\",\"secretsmanager:GetSecretValue\",\"secretsmanager:DescribeSecret\",\"secretsmanager:ListSecretVersionIds\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:secretsmanager:us-west-2:146095493949:secret:/new-release-handler/github-token-aj0Hne\"]},{\"Action\":\"secretsmanager:ListSecrets\",\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}",
                    "policyId": "ANPASEA7YKM67T3HY4KBY",
                    "tags": {},
                    "tagsAll": {
                        "owner": "platform-integrations",
                        "repo": "pulumi/github-issue-automation"
                    }
                },
                "parent": "urn:pulumi:dev::github-issue-automation::pulumi:pulumi:Stack::github-issue-automation-dev",
                "dependencies": [
                    "urn:pulumi:dev::github-issue-automation::aws:secretsmanager/secret:Secret::release-handler-github-token-secret"
                ],
                "provider": "urn:pulumi:dev::github-issue-automation::pulumi:providers:aws::default::7d34f1bb-0dfb-47ee-b044-65ed1c667cf2",
                "propertyDependencies": {
                    "policy": [
                        "urn:pulumi:dev::github-issue-automation::aws:secretsmanager/secret:Secret::release-handler-github-token-secret"
                    ]
                }
            },
            {
                "urn": "urn:pulumi:dev::github-issue-automation::aws:iam/rolePolicyAttachment:RolePolicyAttachment::read-ssm-params-attachment",
                "custom": true,
                "id": "NewReleaseHandlerExecutionRole-20211220211331320100000001",
                "type": "aws:iam/rolePolicyAttachment:RolePolicyAttachment",
                "inputs": {
                    "__defaults": [],
                    "policyArn": "arn:aws:iam::146095493949:policy/new-release-handler-read-secrets-c451ab3",
                    "role": "NewReleaseHandlerExecutionRole"
                },
                "outputs": {
                    "id": "NewReleaseHandlerExecutionRole-20211220211331320100000001",
                    "policyArn": "arn:aws:iam::146095493949:policy/new-release-handler-read-secrets-c451ab3",
                    "role": "NewReleaseHandlerExecutionRole"
                },
                "parent": "urn:pulumi:dev::github-issue-automation::pulumi:pulumi:Stack::github-issue-automation-dev",
                "dependencies": [
                    "urn:pulumi:dev::github-issue-automation::aws:iam/policy:Policy::new-release-handler-read-secrets",
                    "urn:pulumi:dev::github-issue-automation::aws:iam/role:Role::release-handler-role"
                ],
                "provider": "urn:pulumi:dev::github-issue-automation::pulumi:providers:aws::default::7d34f1bb-0dfb-47ee-b044-65ed1c667cf2",
                "propertyDependencies": {
                    "policyArn": [
                        "urn:pulumi:dev::github-issue-automation::aws:iam/policy:Policy::new-release-handler-read-secrets"
                    ],
                    "role": [
                        "urn:pulumi:dev::github-issue-automation::aws:iam/role:Role::release-handler-role"
                    ]
                }
            },
            {
                "urn": "urn:pulumi:dev::github-issue-automation::aws:lambda/function:Function::new-release-handler",
                "custom": true,
                "id": "new-release-handler",
                "type": "aws:lambda/function:Function",
                "inputs": {
                    "__defaults": [
                        "memorySize",
                        "packageType",
                        "publish",
                        "reservedConcurrentExecutions",
                        "timeout"
                    ],
                    "code": {
                        "4dabf18193072939515e22adb298388d": "0def7320c3a5731c473e5ecbe6d01bc7",
                        "hash": "a717e3d4c76cadd9de2a8607675fc5d09389f8234a4969963a33c91dc7d06688",
                        "path": "../.build"
                    },
                    "handler": "new-release-handler",
                    "memorySize": 128,
                    "name": "new-release-handler",
                    "packageType": "Zip",
                    "publish": false,
                    "reservedConcurrentExecutions": -1,
                    "role": "arn:aws:iam::146095493949:role/NewReleaseHandlerExecutionRole",
                    "runtime": "go1.x",
                    "timeout": 3
                },
                "outputs": {
                    "__meta": "{\"e2bfb730-ecaa-11e6-8f88-34363bc7c4c0\":{\"create\":600000000000}}",
                    "architectures": [
                        "x86_64"
                    ],
                    "arn": "arn:aws:lambda:us-west-2:146095493949:function:new-release-handler",
                    "code": {
                        "4dabf18193072939515e22adb298388d": "0def7320c3a5731c473e5ecbe6d01bc7",
                        "hash": "a717e3d4c76cadd9de2a8607675fc5d09389f8234a4969963a33c91dc7d06688",
                        "path": "../.build"
                    },
                    "codeSigningConfigArn": "",
                    "deadLetterConfig": null,
                    "description": "",
                    "environment": null,
                    "fileSystemConfig": null,
                    "handler": "new-release-handler",
                    "id": "new-release-handler",
                    "imageConfig": null,
                    "imageUri": "",
                    "invokeArn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:146095493949:function:new-release-handler/invocations",
                    "kmsKeyArn": "",
                    "lastModified": "2021-12-21T17:31:01.000+0000",
                    "layers": [],
                    "memorySize": 128,
                    "name": "new-release-handler",
                    "packageType": "Zip",
                    "publish": false,
                    "qualifiedArn": "arn:aws:lambda:us-west-2:146095493949:function:new-release-handler:$LATEST",
                    "reservedConcurrentExecutions": -1,
                    "role": "arn:aws:iam::146095493949:role/NewReleaseHandlerExecutionRole",
                    "runtime": "go1.x",
                    "signingJobArn": "",
                    "signingProfileVersionArn": "",
                    "sourceCodeHash": "IhdpSolKBGpQpPreZGpcN7WT+Ji7AxJIzc4NKrG+BEA=",
                    "sourceCodeSize": 6310068,
                    "tags": {},
                    "tagsAll": {
                        "owner": "platform-integrations",
                        "repo": "pulumi/github-issue-automation"
                    },
                    "timeout": 3,
                    "tracingConfig": {
                        "mode": "PassThrough"
                    },
                    "version": "$LATEST",
                    "vpcConfig": null
                },
                "parent": "urn:pulumi:dev::github-issue-automation::pulumi:pulumi:Stack::github-issue-automation-dev",
                "dependencies": [
                    "urn:pulumi:dev::github-issue-automation::aws:iam/role:Role::release-handler-role"
                ],
                "provider": "urn:pulumi:dev::github-issue-automation::pulumi:providers:aws::default::7d34f1bb-0dfb-47ee-b044-65ed1c667cf2",
                "propertyDependencies": {
                    "role": [
                        "urn:pulumi:dev::github-issue-automation::aws:iam/role:Role::release-handler-role"
                    ]
                }
            },
            {
                "urn": "urn:pulumi:dev::github-issue-automation::aws:iam/policy:Policy::zapier-policy",
                "custom": true,
                "id": "arn:aws:iam::146095493949:policy/zapier",
                "type": "aws:iam/policy:Policy",
                "inputs": {
                    "__defaults": [
                        "path"
                    ],
                    "description": "Allows Zapier to invoke a Lambda",
                    "name": "zapier",
                    "path": "/",
                    "policy": "{\"Statement\":[{\"Action\":[\"lambdaFunction:InvokeFunction\",\"lambdaFunction:GetFunction\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:lambda:us-west-2:146095493949:function:new-release-handler\"]},{\"Action\":[\"lambdaFunction:ListFunctions\"],\"Effect\":\"Allow\",\"Resource\":[\"*\"]}],\"Version\":\"2012-10-17\"}"
                },
                "outputs": {
                    "arn": "arn:aws:iam::146095493949:policy/zapier",
                    "description": "Allows Zapier to invoke a Lambda",
                    "id": "arn:aws:iam::146095493949:policy/zapier",
                    "name": "zapier",
                    "path": "/",
                    "policy": "{\"Statement\":[{\"Action\":[\"lambdaFunction:InvokeFunction\",\"lambdaFunction:GetFunction\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:lambda:us-west-2:146095493949:function:new-release-handler\"]},{\"Action\":[\"lambdaFunction:ListFunctions\"],\"Effect\":\"Allow\",\"Resource\":[\"*\"]}],\"Version\":\"2012-10-17\"}",
                    "policyId": "ANPASEA7YKM6WZPZB4DWV",
                    "tags": {},
                    "tagsAll": {
                        "owner": "platform-integrations",
                        "repo": "pulumi/github-issue-automation"
                    }
                },
                "parent": "urn:pulumi:dev::github-issue-automation::pulumi:pulumi:Stack::github-issue-automation-dev",
                "dependencies": [
                    "urn:pulumi:dev::github-issue-automation::aws:lambda/function:Function::new-release-handler"
                ],
                "provider": "urn:pulumi:dev::github-issue-automation::pulumi:providers:aws::default::7d34f1bb-0dfb-47ee-b044-65ed1c667cf2",
                "propertyDependencies": {
                    "policy": [
                        "urn:pulumi:dev::github-issue-automation::aws:lambda/function:Function::new-release-handler"
                    ]
                }
            },
            {
                "urn": "urn:pulumi:dev::github-issue-automation::aws:iam/userPolicyAttachment:UserPolicyAttachment::zapier-policy-attachment",
                "custom": true,
                "id": "zapier-20211209213912553000000001",
                "type": "aws:iam/userPolicyAttachment:UserPolicyAttachment",
                "inputs": {
                    "__defaults": [],
                    "policyArn": "arn:aws:iam::146095493949:policy/zapier",
                    "user": "zapier"
                },
                "outputs": {
                    "id": "zapier-20211209213912553000000001",
                    "policyArn": "arn:aws:iam::146095493949:policy/zapier",
                    "user": "zapier"
                },
                "parent": "urn:pulumi:dev::github-issue-automation::pulumi:pulumi:Stack::github-issue-automation-dev",
                "dependencies": [
                    "urn:pulumi:dev::github-issue-automation::aws:iam/policy:Policy::zapier-policy",
                    "urn:pulumi:dev::github-issue-automation::aws:iam/user:User::zapier-user"
                ],
                "provider": "urn:pulumi:dev::github-issue-automation::pulumi:providers:aws::default::7d34f1bb-0dfb-47ee-b044-65ed1c667cf2",
                "propertyDependencies": {
                    "policyArn": [
                        "urn:pulumi:dev::github-issue-automation::aws:iam/policy:Policy::zapier-policy"
                    ],
                    "user": [
                        "urn:pulumi:dev::github-issue-automation::aws:iam/user:User::zapier-user"
                    ]
                }
            }
        ]
    }
}
